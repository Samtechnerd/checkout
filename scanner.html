<!DOCTYPE html>
<html>
<head>
    <title>PC Scanner Bridge</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body style="background: #111; color: #00ff00; font-family: monospace; text-align: center; padding-top: 100px;">
    <h1>HARDWARE BRIDGE ACTIVE</h1>
    <p>Scanner waiting for input...</p>
    <input type="text" id="bcIn" autofocus style="opacity: 0;">
    <div id="status" style="margin-top:20px"></div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyAXtjM56OQso8g3RauOkT3h1ommplCelyE", authDomain: "checkout-c52ab.firebaseapp.com", projectId: "checkout-c52ab" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const input = document.getElementById('bcIn');

        document.addEventListener('click', () => input.focus());

        input.addEventListener('keydown', async (e) => {
            if (e.key === 'Enter') {
                const code = input.value;
                input.value = '';
                
                // 1. Find product in your Restocker's 'inventory'
                const doc = await db.collection("inventory").doc(code).get();
                
                if (doc.exists) {
                    // 2. Add it to the iPad's terminal collection
                    await db.collection("terminal_111").add(doc.data());
                    document.getElementById('status').innerHTML += `<p>Sent: ${doc.data().name}</p>`;
                } else {
                    document.getElementById('status').innerHTML += `<p style="color:red">Unknown Barcode: ${code}</p>`;
                }
            }
        });
    </script>
</body>
</html>
